'use strict';
function e(e) {
  return e && 'object' == typeof e && 'default' in e ? e.default : e;
}
var t = require('react'),
  n = e(t),
  r = require('react-native'),
  i = e(require('react-native-reanimated')),
  a = require('react-native-gesture-handler');
function o() {
  return (o =
    Object.assign ||
    function(e) {
      for (var t = 1; t < arguments.length; t++) {
        var n = arguments[t];
        for (var r in n)
          Object.prototype.hasOwnProperty.call(n, r) && (e[r] = n[r]);
      }
      return e;
    }).apply(this, arguments);
}
function u(e, t) {
  if (null == e) return {};
  var n,
    r,
    i = {},
    a = Object.keys(e);
  for (r = 0; r < a.length; r++) t.indexOf((n = a[r])) >= 0 || (i[n] = e[n]);
  return i;
}
var l,
  s = ['zIndex'],
  c = ['unit'];
((l = exports.Extrapolate || (exports.Extrapolate = {})).EXTEND = 'extend'),
  (l.CLAMP = 'clamp'),
  (l.IDENTITY = 'identity');
var d = i.event,
  v = i.block,
  f = i.Value,
  h = i.divide,
  p = i.cond,
  m = i.eq,
  x = i.add,
  w = i.stopClock,
  y = i.Clock,
  g = i.set,
  E = i.clockRunning,
  I = i.multiply,
  C = i.sub,
  V = i.call,
  b = i.max,
  P = i.min,
  S = i.greaterThan,
  O = i.abs,
  j = i.ceil,
  k = i.interpolateNode,
  D = i.concat,
  T = i.neq,
  q = i.and,
  A = i.startClock,
  N = i.spring;
function z(e) {
  var t,
    a,
    l = e.children,
    c = e.index,
    d = e.minimum,
    v = e.maximum,
    f = e.dimension,
    h = e.targetTransform,
    p = e.targetDimension,
    m = e.pageInterpolation,
    x = e.animatedIndex,
    w = Q(I(c, f)),
    y = Q(P(b(w, d), v)),
    g = Q((((a = {})[p] = f), (a.transform = [((t = {}), (t[h] = y), t)]), a)),
    E = Q(C(c, x)),
    V = Q(K(E, m)),
    S = V.zIndex,
    O = u(V, s);
  return (
    S || (S = 0),
    n.createElement(
      i.View,
      { style: o({}, r.StyleSheet.absoluteFillObject, g, { zIndex: S }) },
      n.createElement(
        i.View,
        { style: [r.StyleSheet.absoluteFillObject, O] },
        l
      )
    )
  );
}
function F(e, n) {
  void 0 === n && (n = 0);
  var r = Q(new f(void 0 !== e ? e : n));
  return (
    t.useEffect(
      function() {
        void 0 !== e && r.setValue(e);
      },
      [e]
    ),
    r
  );
}
var L = t.createContext(void 0);
function M() {
  var e = t.useContext(L);
  if (void 0 === e)
    throw new Error('usePager() must be used within a <PagerProvider />');
  return e;
}
var X = n.createContext(!1);
function Y(e) {
  return n.createElement(X.Provider, { value: e.focused }, e.children);
}
function R() {
  return t.useContext(X);
}
var G = n.createContext(void 0);
function H(e) {
  return n.createElement(G.Provider, { value: e.index }, e.children);
}
function W() {
  var e = t.useContext(G);
  if (void 0 === e)
    throw new Error('useIndex() must be used within an <IndexProvider />');
  return e;
}
function B() {
  return M()[2];
}
function J(e) {
  var t = B();
  return Q(C(e, t));
}
function K(e, t) {
  return t
    ? Object.keys(t).reduce(function(n, r) {
        var i = t[r];
        if (Array.isArray(i)) {
          var a = i.map(function(t) {
            return K(e, t);
          });
          return (n[r] = a), n;
        }
        if ('object' == typeof i) {
          var o,
            l = u(i, c);
          return (o = i.unit ? D(k(e, l), i.unit) : k(e, i)), (n[r] = o), n;
        }
        if ('function' == typeof i) {
          var s = i(e);
          return (n[r] = s), n;
        }
        return n;
      }, {})
    : {};
}
function Q(e) {
  return n.useRef(e).current;
}
var U = {
  stiffness: 1e3,
  damping: 500,
  mass: 3,
  overshootClamping: !1,
  restDisplacementThreshold: 0.01,
  restSpeedThreshold: 0.01,
};
function Z(e, t, n, r) {
  var i = {
      finished: new f(0),
      velocity: new f(0),
      position: t,
      time: new f(0),
    },
    a = o({}, U, r, { toValue: new f(0) });
  return v([
    p(
      E(e),
      [p(T(a.toValue, n), [g(i.finished, 0), g(a.toValue, n)])],
      [g(i.finished, 0), g(i.time, 0), g(i.velocity, 0), g(a.toValue, n), A(e)]
    ),
    N(e, i, a),
    p(i.finished, [w(e), g(i.position, t)]),
    i.position,
  ]);
}
var $ = ['unit'],
  _ = i.interpolateNode,
  ee = i.concat;
function te(e, t) {
  return t
    ? Object.keys(t).reduce(function(n, r) {
        var i = t[r];
        if (Array.isArray(i)) {
          var a = i.map(function(t) {
            return te(e, t);
          });
          return (n[r] = a), n;
        }
        if ('object' == typeof i) {
          var o,
            l = u(i, $);
          return (o = i.unit ? ee(_(e, l), i.unit) : _(e, i)), (n[r] = o), n;
        }
        if ('function' == typeof i) {
          var s = i(e);
          return (n[r] = s), n;
        }
        return n;
      }, {})
    : {};
}
function ne(e) {
  return t.useRef(e).current;
}
var re = i.Value,
  ie = i.divide,
  ae = i.multiply,
  oe = i.add,
  ue = { height: 50, width: '100%', flexDirection: 'row' };
function le(e) {
  var t = e.children,
    r = e.pageInterpolation,
    a = e.style,
    o = ne(te(J(e.index), r));
  return n.createElement(i.View, { style: [a || { flex: 1 }, o] }, t);
}
var se = { height: 2, backgroundColor: 'aquamarine' };
(exports.FocusProvider = Y),
  (exports.IndexProvider = H),
  (exports.Pager = function(e) {
    var r,
      o,
      u = e.activeIndex,
      l = e.onChange,
      s = e.initialIndex,
      c = void 0 === s ? 0 : s,
      k = e.children,
      D = e.springConfig,
      T = e.panProps,
      A = void 0 === T ? {} : T,
      N = e.pageSize,
      M = void 0 === N ? 1 : N,
      X = e.threshold,
      R = void 0 === X ? 0.1 : X,
      G = e.minIndex,
      W = void 0 === G ? 0 : G,
      B = e.maxIndex,
      J = e.adjacentChildOffset,
      K = void 0 === J ? 10 : J,
      U = e.style,
      $ = e.containerStyle,
      _ = e.type,
      ee = void 0 === _ ? 'horizontal' : _,
      te = e.pageInterpolation,
      ne = e.clamp,
      re = void 0 === ne ? {} : ne,
      ie = e.clampDrag,
      ae = void 0 === ie ? {} : ie,
      oe = e.animatedValue,
      ue = t.useContext(L),
      le = void 0 !== u,
      se = t.useState(c),
      ce = se[1],
      de = le ? u : ue ? ue[0] : se[0],
      ve = t.Children.count(k),
      fe = void 0 === B ? Math.ceil((ve - 1) / M) : B,
      he = le ? l : ue ? ue[1] : ce,
      pe = Q(new f(0)),
      me = Q(new f(0)),
      xe = Q(new f(0)),
      we = Q(
        d([{ nativeEvent: { translationX: pe, translationY: me } }], {
          useNativeDriver: !0,
        })
      ),
      ye = Q(d([{ nativeEvent: { state: xe } }], { useNativeDriver: !0 })),
      ge = -1;
    U && U.width && 'number' == typeof U.width && (ge = U.width);
    var Ee = -1;
    U && U.height && 'number' == typeof U.height && (Ee = U.height);
    var Ie = t.useState(ge),
      Ce = Ie[0],
      Ve = Ie[1],
      be = t.useState(Ee),
      Pe = be[0],
      Se = be[1],
      Oe = Q(new f(0)),
      je = 'vertical' === ee ? 'height' : 'width',
      ke = 'vertical' === ee ? 'translateY' : 'translateX',
      De = 'vertical' === ee ? me : pe,
      Te = 'vertical' === ee ? Pe : Ce,
      qe = I(Oe, ve),
      Ae = 'vertical' === ee ? 1 : 2,
      Ne = F(R),
      ze = F(ae.prev, 1e9),
      Fe = F(ae.next, 1e9),
      Le = F(fe),
      Me = F(W),
      Xe = Q(new f(de)),
      Ye = oe || (ue ? ue[2] : Xe),
      Re = Q(new f(0)),
      Ge = Q(new f(0)),
      He = Q(new f(de)),
      We = Q(new f(de)),
      Be = Q(C(We, Ye)),
      Je = Q(O(Be)),
      Ke = Q(S(Je, Ne)),
      Qe = Q(new f(0)),
      Ue = Q(P(b(h(De, Oe), I(Fe, -1)), ze)),
      Ze = Q(new y());
    t.useEffect(
      function() {
        de >= W && de <= fe && He.setValue(de);
      },
      [de, W, fe]
    );
    var $e = Q(
        v([
          p(
            m(xe, a.State.ACTIVE),
            [
              p(E(Ze), w(Ze)),
              p(Ge, 0, [g(Re, Ye), g(Ge, 1)]),
              g(Ye, C(Re, Ue)),
            ],
            [
              p(Ge, [
                g(Ge, 0),
                p(Ke, [
                  g(Qe, j(Je)),
                  g(
                    He,
                    p(
                      S(Be, 0),
                      P(b(C(We, Qe), Me), Le),
                      P(b(x(We, Qe), Me), Le)
                    )
                  ),
                  V([He], function(e) {
                    return he(e[0]);
                  }),
                ]),
              ]),
              g(We, He),
              g(Ye, Z(Ze, Ye, He, D)),
            ]
          ),
          Ye,
        ])
      ),
      _e = F(re.prev, ve),
      et = F(re.next, ve),
      tt = Q(I(C($e, _e), Oe)),
      nt = Q(I(x($e, et), Oe)),
      rt = F(M),
      it = Q(I($e, Oe, rt, -1)),
      at =
        void 0 !== K
          ? k.slice(Math.max(de - K, 0), Math.min(de + K + 1, ve))
          : k;
    return n.createElement(
      i.View,
      {
        style: $ ||
          (U && U.height ? { height: U.height } : void 0) || { flex: 1 },
      },
      n.createElement(i.Code, {
        key: Te,
        exec: p(
          q(m(Oe, Ce), m(Oe, Pe)),
          [],
          [p(m(Ae, 1), g(Oe, Pe), g(Oe, Ce))]
        ),
      }),
      n.createElement(
        a.PanGestureHandler,
        Object.assign({}, A, { onGestureEvent: we, onHandlerStateChange: ye }),
        n.createElement(
          i.View,
          { style: { flex: 1 } },
          n.createElement(
            i.View,
            { style: U || { flex: 1 } },
            n.createElement(
              i.View,
              {
                style: { flex: 1 },
                onLayout: function(e) {
                  var t = e.nativeEvent.layout;
                  t.width !== Ce && Ve(t.width),
                    t.height !== Pe && Se(t.height);
                },
              },
              n.createElement(
                i.View,
                {
                  style:
                    ((o = { flex: 1 }),
                    (o[je] = qe),
                    (o.transform = [
                      ((r = {}), (r[ke] = it), (r.skewY = '0'), r),
                    ]),
                    o),
                },
                -1 === Ce
                  ? null
                  : at.map(function(e, t) {
                      var r = t;
                      return (
                        void 0 !== K && (r = de <= K ? t : de - K + t),
                        n.createElement(
                          H,
                          { index: r, key: r },
                          n.createElement(
                            Y,
                            { focused: r === de },
                            n.createElement(
                              z,
                              {
                                index: r,
                                animatedIndex: $e,
                                minimum: tt,
                                maximum: nt,
                                dimension: Oe,
                                targetTransform: ke,
                                targetDimension: je,
                                pageInterpolation: te,
                              },
                              e
                            )
                          )
                        )
                      );
                    })
              )
            )
          )
        )
      )
    );
  }),
  (exports.PagerContext = L),
  (exports.PagerProvider = function(e) {
    var r = e.children,
      i = e.initialIndex,
      a = e.activeIndex,
      o = e.onChange,
      u =
        void 0 === o
          ? function() {
              return console.warn(
                '<PagerProvider /> should have an onChange() prop if it is controlled'
              );
            }
          : o,
      l = t.useState(void 0 === i ? 0 : i),
      s = void 0 !== a,
      c = s ? a : l[0],
      d = s ? u : l[1],
      v = Q(new f(c));
    return n.createElement(
      L.Provider,
      { value: [c, d, v] },
      'function' == typeof r
        ? r({ activeIndex: c, onChange: d, animatedIndex: v })
        : r
    );
  }),
  (exports.Pagination = function(e) {
    var r = e.children,
      a = e.pageInterpolation;
    return n.createElement(
      i.View,
      { style: o({}, ue, e.style) },
      t.Children.map(r, function(e, t) {
        return n.createElement(
          le,
          { index: t, pageInterpolation: a, style: e.props.style },
          e
        );
      })
    );
  }),
  (exports.Progress = function(e) {
    var t = e.numberOfScreens,
      r = e.style,
      a = B(),
      u = ne(new re(0)),
      l = ne(ie(u, t, ie(1, oe(a, 1))));
    return n.createElement(
      i.View,
      {
        onLayout: function(e) {
          u.setValue(e.nativeEvent.layout.width);
        },
      },
      n.createElement(i.View, { style: o({ width: l }, se, r) })
    );
  }),
  (exports.Slider = function(e) {
    var t = e.numberOfScreens,
      r = e.style,
      a = B(),
      u = ne(new re(0)),
      l = ie(u, t),
      s = ne(ae(a, l));
    return n.createElement(
      i.View,
      {
        onLayout: function(e) {
          u.setValue(e.nativeEvent.layout.width);
        },
      },
      n.createElement(i.View, {
        style: o({ width: l, transform: [{ translateX: s }] }, se, r),
      })
    );
  }),
  (exports.interpolateWithConfig = te),
  (exports.useAnimatedIndex = B),
  (exports.useFocus = R),
  (exports.useIndex = W),
  (exports.useInterpolation = function(e, t) {
    return Q(K(J(void 0 !== t ? t : W()), e));
  }),
  (exports.useOffset = J),
  (exports.useOnFocus = function(e) {
    var n = R();
    t.useEffect(
      function() {
        n && e();
      },
      [n]
    );
  }),
  (exports.usePager = M);
//# sourceMappingURL=react-native-pager.cjs.production.min.js.map
